ProxyTimeout 600

<Location /status-proxy>
    SetHandler balancer-manager
    Order Deny,Allow
    Deny from all
    Allow from 193.144.202.00/24
    Allow from 192.168.202.00/24
</Location>

ProxyPass /status-proxy !
ProxyPassMatch ^/thredds/(.*)/esgcet ajp://localhost:8223

#<Proxy "balancer://esgf">
#BalancerMember "ajp://localhost:8223/thredds"
#</Proxy>
#ProxyPassMatch ^(/thredds/dodsC/cordex\.output\..*aggregation\.[0-9]+.*)$ "balancer://esgf$1"

{% for c in clusters -%}
<Proxy "balancer://{{ c.name }}">
ProxySet stickysession=JSESSIONID
</Proxy>

{% for u in c.urls|default([]) -%}
ProxyPass "{{ u }}" "balancer://{{ c.name }}{{ u }}"
ProxyPassReverse "{{ u }}" "balancer://{{ c.name }}{{ u }}"
{% endfor %}

{% endfor %}

# Additional reverse proxies
ProxyPass /work http://ui.macc.unican.es/work
ProxyPassReverse /work http://ui.macc.unican.es/work
